<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>python多线程编程 | oyzy</title>
  <meta name="keywords" content=" python ">
  <meta name="description" content="python多线程编程 | oyzy">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello World">
<meta property="og:url" content="http://youngziyi.github.io/2020/03/25/hello-world/">
<meta property="og:site_name" content="oyzy">
<meta property="og:description" content="Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-03-25T15:50:42.502Z">
<meta property="article:modified_time" content="2020-03-25T08:30:50.146Z">
<meta property="article:author" content="Ouyang Ziyi">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.0.1" rel="stylesheet">

<link href="//cdn.bootcss.com/animate.css/3.5.2/animate.min.css" rel="stylesheet">
<link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

<meta name="generator" content="Hexo 4.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="false">
  <input class="theme_blog_path" value="">
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>Ouyang Ziyi</span>
</div>

<div class="icon">
    
        
    
        
        <a title="github" href="https://github.com/YoungZiyi" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
</div>




<ul>
    <li><div class="all active">全部文章<small>(14)</small></div></li>
    
        
            
            <li><div data-rel="C">C<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="网络">网络<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="algorithm">algorithm<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="框架">框架<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="raspberry">raspberry<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="python">python<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="epoll">epoll<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="计算机基础">计算机基础<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="数据结构">数据结构<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="PEP">PEP<small>(1)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="14">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="http://yelog.org/">叶落阁</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode === 13){return false;}">
        <input id="local-search-input" class="search" type="text" placeholder="Search..." />
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a class="color2">C</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">读书笔记</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">python</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">应用技术</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">raspberry</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">epoll</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">algorithm</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">翻译</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a  class="C "
           href="/2016/11/25/How-to-read-statement-in-C/"
           data-tag="C"
           data-author="" >
            <span class="post-title" title="How to read statement in C">How to read statement in C</span>
            <span class="post-date" title="2016-11-25 11:11:11">2016/11/25</span>
        </a>
        
        <a  class="网络 "
           href="/2017/11/23/IP%E5%9C%B0%E5%9D%80%E7%BB%93%E6%9E%84%E5%8F%8A%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86/"
           data-tag="读书笔记"
           data-author="" >
            <span class="post-title" title="IP地址结构及子网划分">IP地址结构及子网划分</span>
            <span class="post-date" title="2017-11-23 22:57:11">2017/11/23</span>
        </a>
        
        <a  class="algorithm "
           href="/2017/03/14/Max-Sum-Subset-Problem/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="Max Sum Subset Problem">Max Sum Subset Problem</span>
            <span class="post-date" title="2017-03-14 11:11:11">2017/03/14</span>
        </a>
        
        <a  class="框架 "
           href="/2018/10/24/PHP%E6%A1%86%E6%9E%B6%E7%9A%84%E8%B7%AF%E7%94%B1%E5%AE%9E%E7%8E%B0%E6%B5%85%E6%9E%90/"
           data-tag="应用技术"
           data-author="" >
            <span class="post-title" title="PHP框架的路由实现浅析">PHP框架的路由实现浅析</span>
            <span class="post-date" title="2018-10-24 23:15:11">2018/10/24</span>
        </a>
        
        <a  class="raspberry "
           href="/2016/06/14/Raspberry-pi-%E7%9B%B4%E8%BF%9EUbuntu%E7%B3%BB%E7%BB%9F%E7%AC%94%E8%AE%B0%E6%9C%AC/"
           data-tag="raspberry"
           data-author="" >
            <span class="post-title" title="Raspberry pi 直连Ubuntu系统笔记本">Raspberry pi 直连Ubuntu系统笔记本</span>
            <span class="post-date" title="2016-06-14 14:09:00">2016/06/14</span>
        </a>
        
        <a  class="python "
           href="/2016/10/31/What-is-metaclass/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="What is metaclass">What is metaclass</span>
            <span class="post-date" title="2016-10-31 11:11:11">2016/10/31</span>
        </a>
        
        <a  class=""
           href="/2020/03/25/hello-world/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2020-03-25 23:50:42">2020/03/25</span>
        </a>
        
        <a  class="python "
           href="/2017/08/05/python%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BC%96%E7%A8%8B/"
           data-tag="python"
           data-author="" >
            <span class="post-title" title="python多线程编程">python多线程编程</span>
            <span class="post-date" title="2017-08-05 11:11:11">2017/08/05</span>
        </a>
        
        <a  class="python "
           href="/2017/07/27/python%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0II/"
           data-tag="读书笔记"
           data-author="" >
            <span class="post-title" title="python源码解析 读书笔记II">python源码解析 读书笔记II</span>
            <span class="post-date" title="2017-07-27 22:03:11">2017/07/27</span>
        </a>
        
        <a  class="epoll "
           href="/2018/05/11/select-poll-epoll-%E5%88%9D%E6%8E%A2/"
           data-tag="epoll"
           data-author="" >
            <span class="post-title" title="select poll epoll 初探">select poll epoll 初探</span>
            <span class="post-date" title="2018-05-11 11:11:11">2018/05/11</span>
        </a>
        
        <a  class="计算机基础 "
           href="/2017/12/19/%E5%8E%9F%E7%A0%81-%E5%8F%8D%E7%A0%81-%E8%A1%A5%E7%A0%81/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="原码、反码、补码学习">原码、反码、补码学习</span>
            <span class="post-date" title="2017-12-19 16:57:11">2017/12/19</span>
        </a>
        
        <a  class="数据结构 "
           href="/2017/08/24/%E6%95%A3%E5%88%97/"
           data-tag="读书笔记"
           data-author="" >
            <span class="post-title" title="散列">散列</span>
            <span class="post-date" title="2017-08-24 22:32:11">2017/08/24</span>
        </a>
        
        <a  class=""
           href="/2017/03/19/%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%8F%8A%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C/"
           data-tag="algorithm"
           data-author="" >
            <span class="post-title" title="链表实现多项式及相关操作">链表实现多项式及相关操作</span>
            <span class="post-date" title="2017-03-19 18:15:06">2017/03/19</span>
        </a>
        
        <a  class="PEP "
           href="/2017/08/24/PEP-333%E2%80%94%E2%80%94Python-Web%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BD%91%E5%85%B3%E6%8E%A5%E5%8F%A3/"
           data-tag="翻译"
           data-author="" >
            <span class="post-title" title="PEP333——Python Web服务器网关接口">PEP333——Python Web服务器网关接口</span>
            <span class="post-date" title="2017-08-24 22:32:11">2017/08/24</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-python多线程编程" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">python多线程编程</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            
                <a  data-rel="python">python</a>
            
        </span>
        
        
        <span class="tag">
            
            <a class="color2">python</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
        创建时间:<time class="date" title='更新时间: 2020-03-25 23:12:21'>2017-08-05 11:11</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读:<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                评论:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#python多线程编程"><span class="toc-text">python多线程编程</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="python多线程编程"><a href="#python多线程编程" class="headerlink" title="python多线程编程"></a>python多线程编程</h1><ol>
<li>为啥使用多线程？</li>
</ol>
<ul>
<li>有时候计算机要处理的任务之间没有因果关系，都是独立的，也就是说任务的结果不会影响其他任务，我们就会希望计算机并行的处理多个任务，这就要使用多线程。当然还有其他方式来实现多任务并行处理，比如说串行程序使用一个或多个计时器来实现一个多路复用的方案，一个串行程序需要从每个I/O终端通道来检查用户的输入，然而程序在读取I/O时不能阻塞，因为用户的输入是不确定时间的，阻塞会影响其他I/O通道的处理，串行程序必须使用非阻塞I/O或拥有计时器的阻塞I/O。由于串行程序只有一个执行线程，为了防止执行其中某一个任务占用太多时间，并对用户的响应进行合理分配，实现起来会有非常复杂的控制流，难以维护。</li>
</ul>
<ol start="2">
<li>进程和线程到底是啥？</li>
</ol>
<ul>
<li>进程（重量级进程）是一个执行中的程序，每个进程都有自己的地址空间、内存、数据栈、以及其他一些用于跟踪执行的辅助数据，操作系统管理其上所有进程的执行，为这些进程分配时间。进程可以通过派生（fork或spawn）新的进程来执行其他任务，由于每个进程都有自己的地址空间和内存。所以进程间只能通过进程间通信的方式共享信息。线程（轻量级进程）与进程类似，但是它们是在一个进程空间下面执行的，并共享上下文，可以将它们认为是在一个主进程中并行运行的一些迷你进程。</li>
</ul>
<ol start="3">
<li>python和线程和全局解释器锁</li>
</ol>
<ul>
<li>python代码是由python虚拟机执行的，python虚拟机其实就是模拟cpu核心，所以，同一时刻只能由一个线程在执行，多线程执行实质上是虚拟机不停的切换执行中的线程，为了保证同一时刻只有一个线程在执行，这里就用到全局解释器锁，所以对虚拟机的访问是由全局解释器锁来控制的。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1. 设置GIL（Global Interpreter Lock）</span><br><span class="line">2. 切换一个线程去执行</span><br><span class="line">3. 执行</span><br><span class="line">    a. 指定数量的字节码指令</span><br><span class="line">    b. 线程主动让出控制权</span><br><span class="line">4. 切换出线程</span><br><span class="line">5. 解锁GIL</span><br><span class="line">6. 重复上述步骤</span><br></pre></td></tr></table></figure>
当调用外部代码（例如C/C++拓展内置函数），GIL会保持锁定，因为这期间没有python字节码计数，但是可以靠在拓展代码中手动解锁GIL。</li>
</ul>

      
       
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">赏</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '5acf6cc39e2ad9bd318a',
            clientSecret: '7887c0d231ac01d21e8082a3fbfb853570574aae',
            repo: 'youngziyi.github.io',
            owner: 'youngziyi',
            admin: ['youngziyi'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">©2016-2020 oyzy</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">目录</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" ></a>

    </div>
</div>
<div class="acParent"></div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>喜欢就点赞,疼爱就打赏</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">支付宝</label></span><span><label><input type="radio" name="pay" value="weixin">微信</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*作者、标签的自动补全*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['#C','#读书笔记','#python','#应用技术','#raspberry','#epoll','#algorithm','#翻译',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: #fafafa;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 492px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
